<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GOGOL</title>

<style>
body { margin:0; font-family:Arial; background:#f1f3f4; }
.header { background:white; padding:16px; text-align:center; position:sticky; top:0; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
.logo { font-size:34px; font-weight:bold; }
.logo span:nth-child(1){color:#4285F4}
.logo span:nth-child(2){color:#EA4335}
.logo span:nth-child(3){color:#FBBC05}
.logo span:nth-child(4){color:#4285F4}
.logo span:nth-child(5){color:#34A853}
.info { font-size:14px; margin-top:6px; color:#555 }
.container { padding:12px; max-width:640px; margin:auto }
.card { background:white; border-radius:16px; margin-bottom:16px; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,0.08); cursor:pointer; transition:0.3s }
.card:hover { transform:translateY(-3px) }
.thumbnail { width:100%; height:180px; object-fit:cover }
.card-title { padding:14px; font-size:17px; font-weight:bold }
.hidden{display:none}
.fade{animation:fadein 0.4s}
@keyframes fadein{from{opacity:0;transform:translateY(10px)}to{opacity:1}}
.weatherBox{display:flex; gap:8px; justify-content:center; align-items:center; font-size:14px}
.forecast{display:flex; overflow-x:auto; gap:10px; padding:10px 0}
.forecastItem{background:white; padding:10px; border-radius:12px; min-width:80px; text-align:center; box-shadow:0 2px 4px rgba(0,0,0,0.1)}
</style>
</head>
<body>

<div id="mainPage">
  <div class="header">
    <div class="logo"><span>G</span><span>O</span><span>G</span><span>O</span><span>L</span></div>
    <div id="info" class="info">ÏúÑÏπò ÌôïÏù∏Ï§ë...</div>
    <div id="forecast" class="forecast"></div>
  </div>
  <div class="container" id="newsContainer"></div>
</div>

<script>

// ===== ÏãúÍ∞Ñ =====
function updateTime(){
  const now=new Date();
  document.getElementById("info").dataset.time=now.toLocaleTimeString();
  renderInfo();
}
setInterval(updateTime,1000);
updateTime();

let weatherText="";
let cityText="";
let airText="";

function renderInfo(){
  const time=document.getElementById("info").dataset.time||"";
  document.getElementById("info").innerText=`${cityText} ${weatherText} ${airText} | ${time}`;
}

// ===== ÎÇ†Ïî® ÏïÑÏù¥ÏΩò =====
function getWeatherIcon(code){
  if(code===0) return "‚òÄ";
  if(code<3) return "üå§";
  if(code<50) return "‚òÅ";
  if(code<70) return "üåß";
  if(code<80) return "‚ùÑ";
  return "üå´";
}

// ===== ÎÇ†Ïî® + ÏòàÎ≥¥ =====
async function loadWeather(lat,lon){
  try{
    const res=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,weathercode&current_weather=true&timezone=auto`);
    const data=await res.json();

    const temp=data.current_weather.temperature;
    const icon=getWeatherIcon(data.current_weather.weathercode);
    weatherText=`${icon} ${temp}¬∞C`;

    // 5Ïùº ÏòàÎ≥¥
    const forecastDiv=document.getElementById("forecast");
    forecastDiv.innerHTML="";

    data.daily.time.slice(0,5).forEach((day,i)=>{
      const item=document.createElement("div");
      item.className="forecastItem fade";
      item.innerHTML=`
        <div>${day.slice(5)}</div>
        <div>${getWeatherIcon(data.daily.weathercode[i])}</div>
        <div>${Math.round(data.daily.temperature_2m_max[i])}¬∞</div>
      `;
      forecastDiv.appendChild(item);
    });

  }catch{
    weatherText="ÎÇ†Ïî® Ïò§Î•ò";
  }
  renderInfo();
}

// ===== Í≥µÍ∏∞Ïßà =====
async function loadAir(lat,lon){
  try{
    const res=await fetch(`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${lat}&longitude=${lon}&current=pm10`);
    const data=await res.json();
    const pm=data.current.pm10;

    if(pm<30) airText="üåø Ï¢ãÏùå";
    else if(pm<80) airText="üòê Î≥¥ÌÜµ";
    else airText="üò∑ ÎÇòÏÅ®";

  }catch{
    airText="Í≥µÍ∏∞Ï†ïÎ≥¥ Ïò§Î•ò";
  }
  renderInfo();
}

// ===== ÎèÑÏãú Ïù¥Î¶Ñ =====
async function loadCity(lat,lon){
  try{
    const res=await fetch(`https://geocoding-api.open-meteo.com/v1/reverse?latitude=${lat}&longitude=${lon}&language=ko`);
    const data=await res.json();
    cityText=data.results?.[0]?.city || data.results?.[0]?.name || "ÌòÑÏû¨ ÏúÑÏπò";
  }catch{
    cityText="ÌòÑÏû¨ ÏúÑÏπò";
  }
  renderInfo();
}

// ===== ÏúÑÏπò ÏöîÏ≤≠ =====
function requestLocation(){
  navigator.geolocation.getCurrentPosition(pos=>{
    const lat=pos.coords.latitude;
    const lon=pos.coords.longitude;
    loadWeather(lat,lon);
    loadAir(lat,lon);
    loadCity(lat,lon);
  },()=>{
    weatherText="ÏúÑÏπò Í±∞Î∂Ä";
    renderInfo();
  });
}

requestLocation();

// ===== Îâ¥Ïä§ =====
const newsData=[
  {title:"Ï∂©Í≤©! Ïú†Î™Ö Ïó∞ÏòàÏù∏ ÎèåÎ∞ú ÌñâÎèô", img:"https://picsum.photos/400/200?1"},
  {title:"Í¥¥ÎèÑÎ£®ÎÇòÏùò ÏñºÍµ¥ Í≥µÍ∞ú", img:"https://picsum.photos/400/200?2"}
];

function loadMore(){
  const c=document.getElementById("newsContainer");
  newsData.forEach(n=>{
    const card=document.createElement("div");
    card.className="card fade";
    card.innerHTML=`<img class="thumbnail" src="${n.img}"><div class="card-title">${n.title}</div>`;
    c.appendChild(card);
  });
}

window.addEventListener("scroll",()=>{
  if(window.innerHeight+window.scrollY>=document.body.offsetHeight-100){
    loadMore();
  }
});

loadMore();

</script>
</body>
</html>
